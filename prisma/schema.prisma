generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model movies {
  id          BigInt  @id @default(autoincrement())
  title       String  @db.VarChar(255)
  duration    Int
  url         String? @db.VarChar(255)
  description String? @db.Text
}

model rooms {
  id       BigInt @id @default(autoincrement())
  name     String @db.VarChar(100)
  capacity Int
}

model seats {
  id          BigInt @id @default(autoincrement())
  room_id     BigInt
  seat_number Int
  row         String @db.VarChar(10)

  @@index([room_id], map: "idx_seats_room")
}

model showtimes {
  id         BigInt   @id @default(autoincrement())
  movie_id   BigInt
  room_id    BigInt
  start_time DateTime @db.Timestamp(0)

  @@index([movie_id], map: "idx_showtimes_movie")
  @@index([room_id], map: "room_id")
}

model tickets {
  id            BigInt   @id @default(autoincrement())
  user_id       BigInt
  showtime_id   BigInt
  seat_id       BigInt
  purchase_date DateTime @default(now()) @db.Timestamp(0)

  @@index([user_id], map: "idx_tickets_user")
  @@index([seat_id], map: "seat_id")
  @@index([showtime_id], map: "showtime_id")
}

model users {
  id       BigInt @id @default(autoincrement())
  name     String @db.VarChar(255)
  email    String @unique(map: "email") @db.VarChar(255)
  password String @db.VarChar(255)
}
